(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.client = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/Users/christopher.campbell/Documents/GitHub/globalBrands/bower_components/o-table/main.js":[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _oTable = require('./src/js/oTable');

var _oTable2 = _interopRequireDefault(_oTable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const constructAll = function () {
	_oTable2.default.init();
	document.removeEventListener('o.DOMContentLoaded', constructAll);
}; /*global require, module*/


document.addEventListener('o.DOMContentLoaded', constructAll);

exports.default = _oTable2.default;

},{"./src/js/oTable":"/Users/christopher.campbell/Documents/GitHub/globalBrands/bower_components/o-table/src/js/oTable.js"}],"/Users/christopher.campbell/Documents/GitHub/globalBrands/bower_components/o-table/src/js/oTable.js":[function(require,module,exports){
'use strict';

/**
 * Initialises an o-table components inside the element passed as the first parameter
 *
 * @param {(HTMLElement|string)} [el=document.body] - Element where to search for the o-table component. You can pass an HTMLElement or a selector string
 * @returns {OTable} - A single OTable instance
 */
function OTable(rootEl) {
	if (!rootEl) {
		rootEl = document.body;
	} else if (!(rootEl instanceof HTMLElement)) {
		rootEl = document.querySelector(rootEl);
	}
	if (rootEl.getAttribute('data-o-component') === "o-table") {
		this.rootEl = rootEl;
	} else {
		this.rootEl = rootEl.querySelector('[data-o-component~="o-table"]');
	}

	if (this.rootEl !== undefined) {
		this.listeners = [];
		this.isResponsive = false;
		this.rootEl.setAttribute('data-o-table--js', '');

		this.tableHeaders = Array.from(this.rootEl.querySelectorAll('thead th'));
		const tableRows = Array.from(this.rootEl.getElementsByTagName('tr'));

		this.tableHeaders.forEach((th, columnIndex) => {
			const listener = this._sortByColumn(columnIndex);
			this.listeners.push(listener);
			th.addEventListener('click', listener);
		});

		// "o-table--responsive-flat" configuration only works when there is a
		// `<thead>` block containing the table headers. If there are no headers
		// available, the `responsive-flat` class needs to be removed to prevent
		// headings being hidden.
		if (this.rootEl.getAttribute('data-o-table-responsive') === 'flat' && this.tableHeaders.length > 0) {
			this.isResponsive = true;
		} else {
			this.rootEl.classList.remove('o-table--responsive-flat');
		}

		if (this.isResponsive) {
			this._duplicateHeaders(tableRows, this.tableHeaders);
		}

		this.dispatch('ready', {
			oTable: this
		});
	}
}

/**
 *
 * @private
 * @param  {Number} columnIndex
 */
OTable.prototype._sortByColumn = function _sortByColumn(columnIndex) {
	return function (event) {
		this.tableHeaders.forEach(header => {
			header.setAttribute('aria-sort', 'none');
		});

		if (this.rootEl.getAttribute('data-o-table-order') === null || this.rootEl.getAttribute('data-o-table-order') === "DES") {
			this.rootEl.setAttribute('data-o-table-order', 'ASC');
			event.currentTarget.setAttribute('aria-sort', 'ascending');
		} else {
			this.rootEl.setAttribute('data-o-table-order', 'DES');
			event.currentTarget.setAttribute('aria-sort', 'descending');
		}
		this.sortRowsByColumn(columnIndex, this.rootEl.getAttribute('data-o-table-order') === "ASC", event.currentTarget.getAttribute('data-o-table-data-type') === 'numeric');
	}.bind(this);
};

/**
 * Duplicate the table headers into each row
 * For use with responsive tables
 *
 * @private
 * @param  {array} rows Table rows
 */
OTable.prototype._duplicateHeaders = function _duplicateHeaders(rows, headers) {
	rows.forEach(row => {
		const data = Array.from(row.getElementsByTagName('td'));
		data.forEach((td, dataIndex) => {
			td.parentNode.insertBefore(headers[dataIndex].cloneNode(true), td);
		});
	});
};

/**
 * Helper function to dispatch namespaced events, namespace defaults to oTable
 * @param  {String} event
 * @param  {Object} data={}
 * @param  {String} namespace='oTable'
 */
OTable.prototype.dispatch = function (event, data = {}, namespace = 'oTable') {
	this._timeoutID = setTimeout(() => {
		this.rootEl.dispatchEvent(new CustomEvent(namespace + '.' + event, {
			detail: data,
			bubbles: true
		}));
	}, 0);
};

/**
 * Helper function to remove all event handlers which were added during instantiation of the component
 * @returns {undefined}
 */
OTable.prototype.removeEventListeners = function () {
	const tableHeaders = Array.from(this.rootEl.querySelectorAll('thead th'));

	tableHeaders.forEach((th, columnIndex) => {
		th.removeEventListener('click', this.listeners[columnIndex]);
	});
};

function ascendingSort(a, b) {
	if (a < b) {
		return -1;
	} else if (b < a) {
		return 1;
	} else {
		return 0;
	}
}

function descendingSort(a, b) {
	if (a < b) {
		return 1;
	} else if (b < a) {
		return -1;
	} else {
		return 0;
	}
}

/**
 * Sorts the table by a specific column
 * @param  {number} The index of the column to sort the table by
 * @param  {bool} Which direction to sort in, ascending or descending
 * @param  {bool} Whether the values in this column are numeric, if they are numeric we convert the contents into numbers
 * @returns undefined
 */
OTable.prototype.sortRowsByColumn = function (index, sortAscending, isNumericValue) {
	const rows = Array.from(this.rootEl.querySelectorAll('tbody tr'));
	const tbody = this.rootEl.querySelector('tbody');
	rows.sort(function (a, b) {
		let aCol = a.children[index];
		let bCol = b.children[index];

		if (aCol.getAttribute('data-o-table-order') !== null) {
			aCol = aCol.getAttribute('data-o-table-order');
			bCol = bCol.getAttribute('data-o-table-order');
			if (!isNaN(parseInt(aCol))) {
				aCol = parseInt(aCol);
				bCol = parseInt(bCol);
			}
		} else {
			aCol = aCol.textContent;
			bCol = bCol.textContent;
		}

		if (isNumericValue) {
			aCol = parseFloat(aCol);
			bCol = parseFloat(bCol);
		}

		if (sortAscending) {
			return ascendingSort(aCol, bCol);
		} else {
			return descendingSort(aCol, bCol);
		}
	});

	tbody.innerHTML = '';

	rows.forEach(function (row) {
		tbody.appendChild(row);
	});

	this.dispatch('sorted');
};

/**
 * Destroys the instance, removing any event listeners that were added during instatiation of the component
 * @returns undefined
 */
OTable.prototype.destroy = function () {
	if (this._timeoutID !== undefined) {
		clearTimeout(this._timeoutID);
		this._timeoutID = undefined;
	}
	this.rootEl.removeAttribute('data-o-table--js');
	this.removeEventListeners();
	delete this.rootEl;
};

/**
 * Initialises all o-table components inside the element passed as the first parameter
 *
 * @param {(HTMLElement|string)} [el=document.body] - Element where to search for o-table components. You can pass an HTMLElement or a selector string
 * @returns {Array|OTable} - An array of OTable instances or a single OTable instance
 */
OTable.init = function (el = document.body) {
	if (!(el instanceof HTMLElement)) {
		el = document.querySelector(el);
	}
	if (/\bo-table\b/.test(el.getAttribute('data-o-component'))) {
		return new OTable(el);
	}
	const tableEls = Array.from(el.querySelectorAll('[data-o-component~="o-table"]'));
	return tableEls.map(el => {
		return new OTable(el);
	});
};

OTable.wrap = function wrap(tableSelector, wrapClass) {
	tableSelector = typeof tableSelector === "string" ? tableSelector : ".o-table";
	wrapClass = typeof wrapClass === "string" ? wrapClass : "o-table-wrapper";

	const matchingEls = document.querySelectorAll(tableSelector);
	let wrapEl;

	if (matchingEls.length > 0) {
		wrapEl = document.createElement('div');
		wrapEl.setAttribute("class", wrapClass);

		for (let c = 0, l = matchingEls.length; c < l; c++) {
			const tableEl = matchingEls[c];

			if (!tableEl.parentNode.matches("." + wrapClass)) {
				wrapElement(tableEl, wrapEl.cloneNode(false));
			}
		}
	}
};

function wrapElement(targetEl, wrapEl) {
	const parentEl = targetEl.parentNode;
	parentEl.insertBefore(wrapEl, targetEl);
	wrapEl.appendChild(targetEl);
}

module.exports = OTable;

},{}],"/Users/christopher.campbell/Documents/GitHub/globalBrands/client/index.js":[function(require,module,exports){
'use strict';

document.querySelector('input#tableFilter').onkeyup = function (event) {
  var filter = event.target.value.toUpperCase(); //get the contents of the search box in UPPERCASE
  document.querySelectorAll('#brandsTable tbody tr').forEach(function (row) {
    //for each selected row
    var searchableText = row.textContent.toUpperCase(); //get all the text content in UPPERCASE
    if (searchableText.indexOf(filter) > -1) {
      //if the filter is in the searchableText of the row then carry on displaying the row
      row.style.display = '';
    } else {
      //otherwise hide it
      row.style.display = 'none';
    }
  });
};

var OTable = require("./../bower_components/o-table/main.js");
oTable = new OTable(document.body);

},{"./../bower_components/o-table/main.js":"/Users/christopher.campbell/Documents/GitHub/globalBrands/bower_components/o-table/main.js"}]},{},["/Users/christopher.campbell/Documents/GitHub/globalBrands/client/index.js"])("/Users/christopher.campbell/Documents/GitHub/globalBrands/client/index.js")
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJib3dlcl9jb21wb25lbnRzL28tdGFibGUvbWFpbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvby10YWJsZS9zcmMvanMvb1RhYmxlLmpzIiwiY2xpZW50L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQ0E7Ozs7OztBQUVBLE1BQU0sZUFBZSxZQUFXO0FBQy9CLGtCQUFPLElBQVA7QUFDQSxVQUFTLG1CQUFULENBQTZCLG9CQUE3QixFQUFtRCxZQUFuRDtBQUNBLENBSEQsQyxDQUhBOzs7QUFRQSxTQUFTLGdCQUFULENBQTBCLG9CQUExQixFQUFnRCxZQUFoRDs7Ozs7OztBQ1JBOzs7Ozs7QUFNQSxTQUFTLE1BQVQsQ0FBZ0IsTUFBaEIsRUFBd0I7QUFDdkIsS0FBSSxDQUFDLE1BQUwsRUFBYTtBQUNaLFdBQVMsU0FBUyxJQUFsQjtBQUNBLEVBRkQsTUFFTyxJQUFJLEVBQUUsa0JBQWtCLFdBQXBCLENBQUosRUFBc0M7QUFDNUMsV0FBUyxTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsQ0FBVDtBQUNBO0FBQ0QsS0FBSSxPQUFPLFlBQVAsQ0FBb0Isa0JBQXBCLE1BQTRDLFNBQWhELEVBQTJEO0FBQzFELE9BQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxFQUZELE1BRU87QUFDTixPQUFLLE1BQUwsR0FBYyxPQUFPLGFBQVAsQ0FBcUIsK0JBQXJCLENBQWQ7QUFDQTs7QUFFRCxLQUFJLEtBQUssTUFBTCxLQUFnQixTQUFwQixFQUErQjtBQUM5QixPQUFLLFNBQUwsR0FBaUIsRUFBakI7QUFDQSxPQUFLLFlBQUwsR0FBb0IsS0FBcEI7QUFDQSxPQUFLLE1BQUwsQ0FBWSxZQUFaLENBQXlCLGtCQUF6QixFQUE2QyxFQUE3Qzs7QUFFQSxPQUFLLFlBQUwsR0FBb0IsTUFBTSxJQUFOLENBQVcsS0FBSyxNQUFMLENBQVksZ0JBQVosQ0FBNkIsVUFBN0IsQ0FBWCxDQUFw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QWFBLElBQU0sU0FBUyxRQUFRLFNBQVIsQ0FBZjtBQUNBLFNBQVMsSUFBSSxNQUFKLENBQVcsU0FBUyxJQUFwQixDQUFUIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qZ2xvYmFsIHJlcXVpcmUsIG1vZHVsZSovXG5pbXBvcnQgb1RhYmxlIGZyb20gJy4vc3JjL2pzL29UYWJsZSc7XG5cbmNvbnN0IGNvbnN0cnVjdEFsbCA9IGZ1bmN0aW9uKCkge1xuXHRvVGFibGUuaW5pdCgpO1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdvLkRPTUNvbnRlbnRMb2FkZWQnLCBjb25zdHJ1Y3RBbGwpO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignby5ET01Db250ZW50TG9hZGVkJywgY29uc3RydWN0QWxsKTtcblxuZXhwb3J0IGRlZmF1bHQgb1RhYmxlO1xuIiwiLyoqXG4gKiBJbml0aWFsaXNlcyBhbiBvLXRhYmxlIGNvbXBvbmVudHMgaW5zaWRlIHRoZSBlbGVtZW50IHBhc3NlZCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyXG4gKlxuICogQHBhcmFtIHsoSFRNTEVsZW1lbnR8c3RyaW5nKX0gW2VsPWRvY3VtZW50LmJvZHldIC0gRWxlbWVudCB3aGVyZSB0byBzZWFyY2ggZm9yIHRoZSBvLXRhYmxlIGNvbXBvbmVudC4gWW91IGNhbiBwYXNzIGFuIEhUTUxFbGVtZW50IG9yIGEgc2VsZWN0b3Igc3RyaW5nXG4gKiBAcmV0dXJucyB7T1RhYmxlfSAtIEEgc2luZ2xlIE9UYWJsZSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBPVGFibGUocm9vdEVsKSB7XG5cdGlmICghcm9vdEVsKSB7XG5cdFx0cm9vdEVsID0gZG9jdW1lbnQuYm9keTtcblx0fSBlbHNlIGlmICghKHJvb3RFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuXHRcdHJvb3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm9vdEVsKTtcblx0fVxuXHRpZiAocm9vdEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1vLWNvbXBvbmVudCcpID09PSBcIm8tdGFibGVcIikge1xuXHRcdHRoaXMucm9vdEVsID0gcm9vdEVsO1xuXHR9IGVsc2Uge1xuXHRcdHRoaXMucm9vdEVsID0gcm9vdEVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW8tY29tcG9uZW50fj1cIm8tdGFibGVcIl0nKTtcblx0fVxuXG5cdGlmICh0aGlzLnJvb3RFbCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhpcy5saXN0ZW5lcnMgPSBbXTtcblx0XHR0aGlzLmlzUmVzcG9uc2l2ZSA9IGZhbHNlO1xuXHRcdHRoaXMucm9vdEVsLnNldEF0dHJpYnV0ZSgnZGF0YS1vLXRhYmxlLS1qcycsICcnKTtcblxuXHRcdHRoaXMudGFibGVIZWFkZXJzID0gQXJyYXkuZnJvbSh0aGlzLnJvb3RFbC5xdWVyeVNlbGVjdG9yQWxsKCd0aGVhZCB0aCcpKTtcblx0XHRjb25zdCB0YWJsZVJvd3MgPSBBcnJheS5mcm9tKHRoaXMucm9vdEVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpKTtcblxuXHRcdHRoaXMudGFibGVIZWFkZXJzLmZvckVhY2goKHRoLCBjb2x1bW5JbmRleCkgPT4ge1xuXHRcdFx0Y29uc3QgbGlzdGVuZXIgPSB0aGlzLl9zb3J0QnlDb2x1bW4oY29sdW1uSW5kZXgpO1xuXHRcdFx0dGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cdFx0XHR0aC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxpc3RlbmVyKTtcblx0XHR9KTtcblxuXHRcdC8vIFwiby10YWJsZS0tcmVzcG9uc2l2ZS1mbGF0XCIgY29uZmlndXJhdGlvbiBvbmx5IHdvcmtzIHdoZW4gdGhlcmUgaXMgYVxuXHRcdC8vIGA8dGhlYWQ+YCBibG9jayBjb250YWluaW5nIHRoZSB0YWJsZSBoZWFkZXJzLiBJZiB0aGVyZSBhcmUgbm8gaGVhZGVyc1xuXHRcdC8vIGF2YWlsYWJsZSwgdGhlIGByZXNwb25zaXZlLWZsYXRgIGNsYXNzIG5lZWRzIHRvIGJlIHJlbW92ZWQgdG8gcHJldmVudFxuXHRcdC8vIGhlYWRpbmdzIGJlaW5nIGhpZGRlbi5cblx0XHRpZiAodGhpcy5yb290RWwuZ2V0QXR0cmlidXRlKCdkYXRhLW8tdGFibGUtcmVzcG9uc2l2ZScpID09PSAnZmxhdCcgJiYgdGhpcy50YWJsZUhlYWRlcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0dGhpcy5pc1Jlc3BvbnNpdmUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJvb3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdvLXRhYmxlLS1yZXNwb25zaXZlLWZsYXQnKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5pc1Jlc3BvbnNpdmUpIHtcblx0XHRcdHRoaXMuX2R1cGxpY2F0ZUhlYWRlcnModGFibGVSb3dzLCB0aGlzLnRhYmxlSGVhZGVycyk7XG5cdFx0fVxuXG5cdFx0dGhpcy5kaXNwYXRjaCgncmVhZHknLCB7XG5cdFx0XHRvVGFibGU6IHRoaXNcblx0XHR9KTtcblx0fVxufVxuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICB7TnVtYmVyfSBjb2x1bW5JbmRleFxuICovXG5PVGFibGUucHJvdG90eXBlLl9zb3J0QnlDb2x1bW4gPSBmdW5jdGlvbiBfc29ydEJ5Q29sdW1uIChjb2x1bW5JbmRleCkge1xuXHRyZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0dGhpcy50YWJsZUhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG5cdFx0XHRoZWFkZXIuc2V0QXR0cmlidXRlKCdhcmlhLXNvcnQnLCAnbm9uZScpO1xuXHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMucm9vdEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1vLXRhYmxlLW9yZGVyJykgPT09IG51bGwgfHwgdGhpcy5yb290RWwuZ2V0QXR0cmlidXRlKCdkYXRhLW8tdGFibGUtb3JkZXInKSA9PT0gXCJERVNcIikge1xuXHRcdFx0dGhpcy5yb290RWwuc2V0QXR0cmlidXRlKCdkYXRhLW8tdGFibGUtb3JkZXInLCAnQVNDJyk7XG5cdFx0XHRldmVudC5jdXJyZW50VGFyZ2V0LnNldEF0dHJpYnV0ZSgnYXJpYS1zb3J0JywgJ2FzY2VuZGluZycpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJvb3RFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtby10YWJsZS1vcmRlcicsICdERVMnKTtcblx0XHRcdGV2ZW50LmN1cnJlbnRUYXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLXNvcnQnLCAnZGVzY2VuZGluZycpO1xuXHRcdH1cblx0XHR0aGlzLnNvcnRSb3dzQnlDb2x1bW4oY29sdW1uSW5kZXgsIHRoaXMucm9vdEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1vLXRhYmxlLW9yZGVyJykgPT09IFwiQVNDXCIsIGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW8tdGFibGUtZGF0YS10eXBlJykgPT09ICdudW1lcmljJyk7XG5cdH0uYmluZCh0aGlzKTtcbn07XG5cbi8qKlxuICogRHVwbGljYXRlIHRoZSB0YWJsZSBoZWFkZXJzIGludG8gZWFjaCByb3dcbiAqIEZvciB1c2Ugd2l0aCByZXNwb25zaXZlIHRhYmxlc1xuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gIHthcnJheX0gcm93cyBUYWJsZSByb3dzXG4gKi9cbk9UYWJsZS5wcm90b3R5cGUuX2R1cGxpY2F0ZUhlYWRlcnMgPSBmdW5jdGlvbiBfZHVwbGljYXRlSGVhZGVycyAocm93cywgaGVhZGVycykge1xuXHRyb3dzLmZvckVhY2goKHJvdykgPT4ge1xuXHRcdGNvbnN0IGRhdGEgPSBBcnJheS5mcm9tKHJvdy5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGQnKSk7XG5cdFx0ZGF0YS5mb3JFYWNoKCh0ZCwgZGF0YUluZGV4KSA9PiB7XG5cdFx0XHR0ZC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShoZWFkZXJzW2RhdGFJbmRleF0uY2xvbmVOb2RlKHRydWUpLCB0ZCk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZGlzcGF0Y2ggbmFtZXNwYWNlZCBldmVudHMsIG5hbWVzcGFjZSBkZWZhdWx0cyB0byBvVGFibGVcbiAqIEBwYXJhbSAge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSAge09iamVjdH0gZGF0YT17fVxuICogQHBhcmFtICB7U3RyaW5nfSBuYW1lc3BhY2U9J29UYWJsZSdcbiAqL1xuT1RhYmxlLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudCwgZGF0YSA9IHt9LCBuYW1lc3BhY2UgPSAnb1RhYmxlJykge1xuXHR0aGlzLl90aW1lb3V0SUQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHR0aGlzLnJvb3RFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChuYW1lc3BhY2UgKyAnLicgKyBldmVudCwge1xuXHRcdFx0ZGV0YWlsOiBkYXRhLFxuXHRcdFx0YnViYmxlczogdHJ1ZVxuXHRcdH0pKTtcblx0fSwgMCk7XG59O1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZW1vdmUgYWxsIGV2ZW50IGhhbmRsZXJzIHdoaWNoIHdlcmUgYWRkZWQgZHVyaW5nIGluc3RhbnRpYXRpb24gb2YgdGhlIGNvbXBvbmVudFxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqL1xuT1RhYmxlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcblx0Y29uc3QgdGFibGVIZWFkZXJzID0gQXJyYXkuZnJvbSh0aGlzLnJvb3RFbC5xdWVyeVNlbGVjdG9yQWxsKCd0aGVhZCB0aCcpKTtcblxuXHR0YWJsZUhlYWRlcnMuZm9yRWFjaCgodGgsIGNvbHVtbkluZGV4KSA9PiB7XG5cdFx0dGgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmxpc3RlbmVyc1tjb2x1bW5JbmRleF0pO1xuXHR9KTtcbn07XG5cbmZ1bmN0aW9uIGFzY2VuZGluZ1NvcnQgKGEsIGIpIHtcblx0aWYgKGEgPCBiKSB7XG5cdFx0cmV0dXJuIC0xO1xuXHR9IGVsc2UgaWYgKGIgPCBhKSB7XG5cdFx0cmV0dXJuIDE7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVzY2VuZGluZ1NvcnQgKGEsIGIpIHtcblx0aWYgKGEgPCBiKSB7XG5cdFx0cmV0dXJuIDE7XG5cdH0gZWxzZSBpZiAoYiA8IGEpIHtcblx0XHRyZXR1cm4gLTE7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cbn1cblxuLyoqXG4gKiBTb3J0cyB0aGUgdGFibGUgYnkgYSBzcGVjaWZpYyBjb2x1bW5cbiAqIEBwYXJhbSAge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBjb2x1bW4gdG8gc29ydCB0aGUgdGFibGUgYnlcbiAqIEBwYXJhbSAge2Jvb2x9IFdoaWNoIGRpcmVjdGlvbiB0byBzb3J0IGluLCBhc2NlbmRpbmcgb3IgZGVzY2VuZGluZ1xuICogQHBhcmFtICB7Ym9vbH0gV2hldGhlciB0aGUgdmFsdWVzIGluIHRoaXMgY29sdW1uIGFyZSBudW1lcmljLCBpZiB0aGV5IGFyZSBudW1lcmljIHdlIGNvbnZlcnQgdGhlIGNvbnRlbnRzIGludG8gbnVtYmVyc1xuICogQHJldHVybnMgdW5kZWZpbmVkXG4gKi9cbk9UYWJsZS5wcm90b3R5cGUuc29ydFJvd3NCeUNvbHVtbiA9IGZ1bmN0aW9uIChpbmRleCwgc29ydEFzY2VuZGluZywgaXNOdW1lcmljVmFsdWUpIHtcblx0Y29uc3Qgcm93cyA9IEFycmF5LmZyb20odGhpcy5yb290RWwucXVlcnlTZWxlY3RvckFsbCgndGJvZHkgdHInKSk7XG5cdGNvbnN0IHRib2R5ID0gdGhpcy5yb290RWwucXVlcnlTZWxlY3RvcigndGJvZHknKTtcblx0cm93cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0bGV0IGFDb2wgPSBhLmNoaWxkcmVuW2luZGV4XTtcblx0XHRsZXQgYkNvbCA9IGIuY2hpbGRyZW5baW5kZXhdO1xuXG5cdFx0aWYgKGFDb2wuZ2V0QXR0cmlidXRlKCdkYXRhLW8tdGFibGUtb3JkZXInKSAhPT0gbnVsbCkge1xuXHRcdFx0YUNvbCA9IGFDb2wuZ2V0QXR0cmlidXRlKCdkYXRhLW8tdGFibGUtb3JkZXInKTtcblx0XHRcdGJDb2wgPSBiQ29sLmdldEF0dHJpYnV0ZSgnZGF0YS1vLXRhYmxlLW9yZGVyJyk7XG5cdFx0XHRpZiAoIWlzTmFOKHBhcnNlSW50KGFDb2wpKSkge1xuXHRcdFx0XHRhQ29sID0gcGFyc2VJbnQoYUNvbCk7XG5cdFx0XHRcdGJDb2wgPSBwYXJzZUludChiQ29sKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0YUNvbCA9IGFDb2wudGV4dENvbnRlbnQ7XG5cdFx0XHRiQ29sID0gYkNvbC50ZXh0Q29udGVudDtcblx0XHR9XG5cblx0XHRpZiAoaXNOdW1lcmljVmFsdWUpIHtcblx0XHRcdGFDb2wgPSBwYXJzZUZsb2F0KGFDb2wpO1xuXHRcdFx0YkNvbCA9IHBhcnNlRmxvYXQoYkNvbCk7XG5cdFx0fVxuXG5cdFx0aWYgKHNvcnRBc2NlbmRpbmcpIHtcblx0XHRcdHJldHVybiBhc2NlbmRpbmdTb3J0KGFDb2wsIGJDb2wpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gZGVzY2VuZGluZ1NvcnQoYUNvbCwgYkNvbCk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdHRib2R5LmlubmVySFRNTCA9ICcnO1xuXG5cdHJvd3MuZm9yRWFjaChmdW5jdGlvbihyb3cpIHtcblx0XHR0Ym9keS5hcHBlbmRDaGlsZChyb3cpO1xuXHR9KTtcblxuXHR0aGlzLmRpc3BhdGNoKCdzb3J0ZWQnKTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIGluc3RhbmNlLCByZW1vdmluZyBhbnkgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZCBkdXJpbmcgaW5zdGF0aWF0aW9uIG9mIHRoZSBjb21wb25lbnRcbiAqIEByZXR1cm5zIHVuZGVmaW5lZFxuICovXG5PVGFibGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcblx0aWYgKHRoaXMuX3RpbWVvdXRJRCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJRCk7XG5cdFx0dGhpcy5fdGltZW91dElEID0gdW5kZWZpbmVkO1xuXHR9XG5cdHRoaXMucm9vdEVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1vLXRhYmxlLS1qcycpO1xuXHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG5cdGRlbGV0ZSB0aGlzLnJvb3RFbDtcbn07XG5cbi8qKlxuICogSW5pdGlhbGlzZXMgYWxsIG8tdGFibGUgY29tcG9uZW50cyBpbnNpZGUgdGhlIGVsZW1lbnQgcGFzc2VkIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXJcbiAqXG4gKiBAcGFyYW0geyhIVE1MRWxlbWVudHxzdHJpbmcpfSBbZWw9ZG9jdW1lbnQuYm9keV0gLSBFbGVtZW50IHdoZXJlIHRvIHNlYXJjaCBmb3Igby10YWJsZSBjb21wb25lbnRzLiBZb3UgY2FuIHBhc3MgYW4gSFRNTEVsZW1lbnQgb3IgYSBzZWxlY3RvciBzdHJpbmdcbiAqIEByZXR1cm5zIHtBcnJheXxPVGFibGV9IC0gQW4gYXJyYXkgb2YgT1RhYmxlIGluc3RhbmNlcyBvciBhIHNpbmdsZSBPVGFibGUgaW5zdGFuY2VcbiAqL1xuT1RhYmxlLmluaXQgPSBmdW5jdGlvbihlbCA9IGRvY3VtZW50LmJvZHkpIHtcblx0aWYgKCEoZWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcblx0XHRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuXHR9XG5cdGlmICgvXFxiby10YWJsZVxcYi8udGVzdChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtby1jb21wb25lbnQnKSkpIHtcblx0XHRyZXR1cm4gbmV3IE9UYWJsZShlbCk7XG5cdH1cblx0Y29uc3QgdGFibGVFbHMgPSBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW8tY29tcG9uZW50fj1cIm8tdGFibGVcIl0nKSk7XG5cdHJldHVybiB0YWJsZUVscy5tYXAoZWwgPT4ge1xuXHRcdHJldHVybiBuZXcgT1RhYmxlKGVsKTtcblx0fSk7XG59O1xuXG5PVGFibGUud3JhcCA9IGZ1bmN0aW9uIHdyYXAodGFibGVTZWxlY3Rvciwgd3JhcENsYXNzKSB7XG5cdHRhYmxlU2VsZWN0b3IgPSB0eXBlb2YgdGFibGVTZWxlY3RvciA9PT0gXCJzdHJpbmdcIiA/IHRhYmxlU2VsZWN0b3IgOiBcIi5vLXRhYmxlXCI7XG5cdHdyYXBDbGFzcyA9IHR5cGVvZiB3cmFwQ2xhc3MgPT09IFwic3RyaW5nXCIgPyB3cmFwQ2xhc3MgOiBcIm8tdGFibGUtd3JhcHBlclwiO1xuXG5cdGNvbnN0IG1hdGNoaW5nRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0YWJsZVNlbGVjdG9yKTtcblx0bGV0IHdyYXBFbDtcblxuXHRpZiAobWF0Y2hpbmdFbHMubGVuZ3RoID4gMCkge1xuXHRcdHdyYXBFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHdyYXBFbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB3cmFwQ2xhc3MpO1xuXG5cdFx0Zm9yIChsZXQgYyA9IDAsIGwgPSBtYXRjaGluZ0Vscy5sZW5ndGg7IGMgPCBsOyBjKyspIHtcblx0XHRcdGNvbnN0IHRhYmxlRWwgPSBtYXRjaGluZ0Vsc1tjXTtcblxuXHRcdFx0aWYgKCF0YWJsZUVsLnBhcmVudE5vZGUubWF0Y2hlcyhcIi5cIiArIHdyYXBDbGFzcykpIHtcblx0XHRcdFx0d3JhcEVsZW1lbnQodGFibGVFbCwgd3JhcEVsLmNsb25lTm9kZShmYWxzZSkpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuZnVuY3Rpb24gd3JhcEVsZW1lbnQodGFyZ2V0RWwsIHdyYXBFbCkge1xuXHRjb25zdCBwYXJlbnRFbCA9IHRhcmdldEVsLnBhcmVudE5vZGU7XG5cdHBhcmVudEVsLmluc2VydEJlZm9yZSh3cmFwRWwsIHRhcmdldEVsKTtcblx0d3JhcEVsLmFwcGVuZENoaWxkKHRhcmdldEVsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPVGFibGU7XG4iLCJkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCN0YWJsZUZpbHRlcicpXG4gIC5vbmtleXVwID0gKGV2ZW50KT0+e1xuICAgIGNvbnN0IGZpbHRlciA9IGV2ZW50LnRhcmdldC52YWx1ZS50b1VwcGVyQ2FzZSgpOyAvL2dldCB0aGUgY29udGVudHMgb2YgdGhlIHNlYXJjaCBib3ggaW4gVVBQRVJDQVNFXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2JyYW5kc1RhYmxlIHRib2R5IHRyJykuZm9yRWFjaCggKHJvdyk9PnsgLy9mb3IgZWFjaCBzZWxlY3RlZCByb3dcbiAgICAgIGNvbnN0IHNlYXJjaGFibGVUZXh0ID0gcm93LnRleHRDb250ZW50LnRvVXBwZXJDYXNlKCk7IC8vZ2V0IGFsbCB0aGUgdGV4dCBjb250ZW50IGluIFVQUEVSQ0FTRVxuICAgICAgaWYoc2VhcmNoYWJsZVRleHQuaW5kZXhPZihmaWx0ZXIpID4gLTEpeyAgLy9pZiB0aGUgZmlsdGVyIGlzIGluIHRoZSBzZWFyY2hhYmxlVGV4dCBvZiB0aGUgcm93IHRoZW4gY2Fycnkgb24gZGlzcGxheWluZyB0aGUgcm93XG4gICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICB9ZWxzZXsgIC8vb3RoZXJ3aXNlIGhpZGUgaXRcbiAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbmNvbnN0IE9UYWJsZSA9IHJlcXVpcmUoJ28tdGFibGUnKTtcbm9UYWJsZSA9IG5ldyBPVGFibGUoZG9jdW1lbnQuYm9keSk7Il19
